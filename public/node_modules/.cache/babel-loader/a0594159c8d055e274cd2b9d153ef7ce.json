{"ast":null,"code":"import _defineProperty from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _excluded=[\"editing\",\"dataIndex\",\"title\",\"inputType\",\"record\",\"index\",\"children\"];import React,{useState,useEffect}from\"react\";import AddNew from\"./components/AddNew\";import'bootstrap/dist/css/bootstrap.min.css';import\"antd/dist/antd.css\";import{Table,InputNumber,Popconfirm,Form,Typography}from'antd';import'./App.css';import axios from\"axios\";import{Input,Button,Space}from'antd';import Highlighter from'react-highlight-words';import{SearchOutlined}from'@ant-design/icons';// import { BASE_API_URL } from \"./utils/constants\";\nimport{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchText=_useState4[0],setSearchText=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchedColumn=_useState6[0],setSearchedColumn=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),first_name=_useState8[0],setFirstName=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),last_name=_useState10[0],setLastName=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),email=_useState12[0],setEmail=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),gender=_useState14[0],setGender=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),country=_useState16[0],setCountry=_useState16[1];useEffect(function(){axios.get(\"/api/get\").then(function(res){setData(res.data.recordset);}).catch(function(err){return console.log(err);});},[]);var deleteEmployee=function deleteEmployee(first_name){axios.delete(\"/api/delete/\".concat(first_name));setData(data.filter(function(val){return val.first_name!==first_name;}));};var updateEmployee=function updateEmployee(id){axios.put(\"/api/update\",{id:id,first_name:first_name,last_name:last_name,email:email,gender:gender,country:country});setData(data.map(function(val){return val.first_name===first_name?{first_name:val.first_name,last_name:last_name,email:email,gender:gender,country:country}:val;}));};function getColumnSearchProps(dataIndex){return{filterDropdown:function filterDropdown(_ref){var setSelectedKeys=_ref.setSelectedKeys,selectedKeys=_ref.selectedKeys,confirm=_ref.confirm,clearFilters=_ref.clearFilters;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:8},children:[/*#__PURE__*/_jsx(Input// ref={node => {\n//   this.searchInput = node;\n// }}\n,{placeholder:\"Search \".concat(dataIndex),value:selectedKeys[0],onChange:function onChange(e){return setSelectedKeys(e.target.value?[e.target.value]:[]);},onPressEnter:function onPressEnter(){return handleSearch(selectedKeys,confirm,dataIndex);},style:{width:188,marginBottom:8,display:'block'}}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:function onClick(){return handleSearch(selectedKeys,confirm,dataIndex);},icon:/*#__PURE__*/_jsx(SearchOutlined,{}),size:\"small\",style:{width:90},children:\"Search\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return handleReset(clearFilters);},size:\"small\",style:{width:90},children:\"Reset\"})]})]});},filterIcon:function filterIcon(filtered){return/*#__PURE__*/_jsx(SearchOutlined,{style:{color:filtered?'#1890ff':undefined}});},onFilter:function onFilter(value,record){return record[dataIndex].toString().toLowerCase().includes(value.toLowerCase());},onFilterDropdownVisibleChange:function onFilterDropdownVisibleChange(visible){if(visible){// setTimeout(() => this.searchInput.select());\n}},render:function render(text){return searchedColumn===dataIndex?/*#__PURE__*/_jsx(Highlighter,{highlightStyle:{backgroundColor:'#ffc069',padding:0},searchWords:[searchText],autoEscape:true,textToHighlight:text.toString()}):text;}};};function handleSearch(selectedKeys,confirm,dataIndex){confirm();setSearchText(selectedKeys[0]);setSearchedColumn(dataIndex);};function handleReset(clearFilters){clearFilters();setSearchText('');};var EditableCell=function EditableCell(_ref2){var editing=_ref2.editing,dataIndex=_ref2.dataIndex,title=_ref2.title,inputType=_ref2.inputType,record=_ref2.record,index=_ref2.index,children=_ref2.children,restProps=_objectWithoutProperties(_ref2,_excluded);var inputNode=inputType==='number'?/*#__PURE__*/_jsx(InputNumber,{}):/*#__PURE__*/_jsx(Input,{});return/*#__PURE__*/_jsx(\"td\",_objectSpread(_objectSpread({},restProps),{},{children:editing?/*#__PURE__*/_jsx(Form.Item,{name:dataIndex,style:{margin:0},rules:[{required:true,message:\"Please Input \".concat(title,\"!\")}],children:inputNode}):children}));};var _Form$useForm=Form.useForm(),_Form$useForm2=_slicedToArray(_Form$useForm,1),form=_Form$useForm2[0];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),editingKey=_useState18[0],setEditingKey=_useState18[1];var isEditing=function isEditing(record){return record.id===editingKey;};var edit=function edit(record){form.setFieldsValue(_objectSpread({first_name:'',last_name:'',email:'',gender:'',country:''},record));setEditingKey(record.id);};var cancel=function cancel(){setEditingKey('');};var save=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var row,newData,index,item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return form.validateFields();case 3:row=_context.sent;newData=_toConsumableArray(data);index=newData.findIndex(function(item){return id===item.id;});if(index>-1){item=newData[index];newData.splice(index,1,_objectSpread(_objectSpread({},item),row));setData(newData);setEditingKey('');}else{newData.push(row);setData(newData);setEditingKey('');}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log('Validate Failed:',_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function save(_x){return _ref3.apply(this,arguments);};}();var columns=[_objectSpread({title:'first_name',dataIndex:'first_name',// key: 'first_name',\neditable:true,sorter:{compare:function compare(a,b){return a.first_name.localeCompare(b.first_name);},multiple:1}},getColumnSearchProps('first_name')),_objectSpread({title:'last_name',dataIndex:'last_name',// key: 'last_name',\neditable:true,sorter:{compare:function compare(a,b){return a.last_name.localeCompare(b.last_name);},multiple:2}},getColumnSearchProps('last_name')),_objectSpread({title:'email',dataIndex:'email',// key: 'email',\neditable:true},getColumnSearchProps('email')),_objectSpread({title:'gender',dataIndex:'gender',// key: 'gender',\neditable:true},getColumnSearchProps('gender')),// {\n//   title: 'Age',\n//   dataIndex: 'age',\n//   key: 'age',\n//   ...getColumnSearchProps('age'),\n// },\n_objectSpread({title:'country',dataIndex:'country',// key: 'country',\neditable:true},getColumnSearchProps('country')),{title:'update',dataIndex:'update',render:function render(_,record){var editable=isEditing(record);return editable?/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"a\",{href:\"javascript:;\",onClick:function onClick(){return save(record.id);}// onClick={() => {updateEmployee(record.first_name)}}\n,style:{marginRight:8},children:\"Save\"}),/*#__PURE__*/_jsx(Popconfirm,{title:\"Sure to cancel?\",onConfirm:cancel,children:/*#__PURE__*/_jsx(\"a\",{children:\"Cancel\"})})]}):/*#__PURE__*/_jsx(Typography.Link,{disabled:editingKey!=='',onClick:function onClick(){return edit(record);},children:\"Edit\"});}},{title:'action',dataIndex:'',key:'x',render:function render(text,record){return/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){deleteEmployee(record.first_name);},children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\"},children:\"Delete\"})});}}];var mergedColumns=columns.map(function(col){if(!col.editable){return col;}return _objectSpread(_objectSpread({},col),{},{onCell:function onCell(record){return{record:record,inputType:col.dataIndex==='age'?'number':'text',dataIndex:col.dataIndex,title:col.title,editing:isEditing(record)};}});});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"60%\",marginLeft:\"auto\",marginRight:\"auto\"},children:/*#__PURE__*/_jsx(Form,{form:form,component:false,children:/*#__PURE__*/_jsx(Table,_defineProperty({className:\"effect8\",components:{body:{cell:EditableCell}},dataSource:data,columns:mergedColumns// searchableProps={{fuzzySearch:true}} \n// exportable \n,pagination:{onChange:cancel},scroll:{y:400},bordered:true,rowClassName:\"editable-row\"},\"rowClassName\",function rowClassName(record,index){return index%2===0?'table-row-light':'table-row-dark';}))})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AddNew,{})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/chart\",children:/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"orangered\",marginRight:20},type:\"submit\",children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"white\"},children:\"Go to Charts\"})})})})]})});}export default App;","map":{"version":3,"sources":["C:/Users/hemag/OneDrive/Desktop/Azure/design-antd/client/src/App.js"],"names":["React","useState","useEffect","AddNew","Table","InputNumber","Popconfirm","Form","Typography","axios","Input","Button","Space","Highlighter","SearchOutlined","Link","App","data","setData","searchText","setSearchText","searchedColumn","setSearchedColumn","first_name","setFirstName","last_name","setLastName","email","setEmail","gender","setGender","country","setCountry","get","then","res","recordset","catch","err","console","log","deleteEmployee","delete","filter","val","updateEmployee","id","put","map","getColumnSearchProps","dataIndex","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","e","target","value","handleSearch","width","marginBottom","display","handleReset","filterIcon","filtered","color","undefined","onFilter","record","toString","toLowerCase","includes","onFilterDropdownVisibleChange","visible","render","text","backgroundColor","EditableCell","editing","title","inputType","index","children","restProps","inputNode","margin","required","message","useForm","form","editingKey","setEditingKey","isEditing","edit","setFieldsValue","cancel","save","validateFields","row","newData","findIndex","item","splice","push","columns","editable","sorter","compare","a","b","localeCompare","multiple","_","marginRight","key","mergedColumns","col","onCell","flexDirection","marginLeft","body","cell","onChange","y"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport AddNew from \"./components/AddNew\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport \"antd/dist/antd.css\";\nimport { Table, InputNumber, Popconfirm, Form, Typography } from 'antd';\nimport './App.css';\nimport axios from \"axios\";\nimport { Input, Button, Space } from 'antd';\nimport Highlighter from 'react-highlight-words';\nimport { SearchOutlined } from '@ant-design/icons';\n// import { BASE_API_URL } from \"./utils/constants\";\nimport { Link } from \"react-router-dom\";\n\nfunction App() {\n\n  const [data, setData] = useState([]);\n  const [searchText, setSearchText] = useState('');\n  const [searchedColumn, setSearchedColumn] = useState('');\n  const [first_name, setFirstName] = useState('');\n  const [last_name, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [gender, setGender] = useState('');\n  const [country, setCountry] = useState('');\n\n\n  useEffect(() => {\n    axios.get(\"/api/get\")\n      .then((res) => {\n        setData(res.data.recordset);\n      })\n      .catch((err) => console.log(err))\n  }, []);\n\n\n  const deleteEmployee = (first_name) => {\n    axios.delete(`/api/delete/${first_name}`);\n\n    setData(data.filter((val) => {\n      return val.first_name !== first_name;\n    }));\n  }\n\n  const updateEmployee = (id) => {\n    axios.put(\"/api/update\", {\n      id: id,\n      first_name: first_name,\n      last_name: last_name,\n      email: email,\n      gender: gender,\n      country: country\n    });\n\n    setData(data.map((val) => {\n      return val.first_name === first_name ? {\n        first_name: val.first_name, \n        last_name: last_name,\n        email: email,\n        gender: gender,\n        country: country\n      }\n      :val\n    }));\n  };\n\n\n  function getColumnSearchProps(dataIndex) {\n    return {\n      filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => (\n        <div style={{ padding: 8 }}>\n          <Input\n            // ref={node => {\n            //   this.searchInput = node;\n            // }}\n            placeholder={`Search ${dataIndex}`}\n            value={selectedKeys[0]}\n            onChange={e => setSelectedKeys(e.target.value ? [e.target.value] : [])}\n            onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n            style={{ width: 188, marginBottom: 8, display: 'block' }}\n          />\n          <Space>\n            <Button\n              type=\"primary\"\n              onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n              icon={<SearchOutlined />}\n              size=\"small\"\n              style={{ width: 90 }}\n            >\n              Search\n            </Button>\n            <Button onClick={() => handleReset(clearFilters)} size=\"small\" style={{ width: 90 }}>\n              Reset\n            </Button>\n          </Space>\n        </div>\n      ),\n      filterIcon: filtered => <SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\n      onFilter: (value, record) =>\n        record[dataIndex].toString().toLowerCase().includes(value.toLowerCase()),\n      onFilterDropdownVisibleChange: visible => {\n        if (visible) {\n          // setTimeout(() => this.searchInput.select());\n        }\n      },\n      render: text =>\n        searchedColumn === dataIndex ? (\n          <Highlighter\n            highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\n            searchWords={[searchText]}\n            autoEscape\n            textToHighlight={text.toString()}\n          />\n        ) : (\n          text\n        ),\n    }\n  };\n\n  function handleSearch(selectedKeys, confirm, dataIndex) {\n    confirm();\n    setSearchText(selectedKeys[0]);\n    setSearchedColumn(dataIndex);\n  };\n\n  function handleReset(clearFilters) {\n    clearFilters();\n    setSearchText('');\n  };\n\n  const EditableCell = ({\n    editing,\n    dataIndex,\n    title,\n    inputType,\n    record,\n    index,\n    children,\n    ...restProps\n  }) => {\n    const inputNode = inputType === 'number' ? <InputNumber /> : <Input />;\n    return (\n      <td {...restProps}>\n        {editing ? (\n          <Form.Item\n            name={dataIndex}\n            style={{\n              margin: 0,\n            }}\n            rules={[\n              {\n                required: true,\n                message: `Please Input ${title}!`,\n              },\n            ]}\n          >\n            {inputNode}\n          </Form.Item>\n        ) : (\n          children\n        )}\n      </td>\n    );\n  };\n\n\n  const [form] = Form.useForm();\n  const [editingKey, setEditingKey] = useState('');\n\n  const isEditing = (record) => record.id === editingKey;\n\n  const edit = (record) => {\n    form.setFieldsValue({\n      first_name: '',\n      last_name: '',\n      email: '',\n      gender: '',\n      country: '',\n      ...record,\n    });\n    setEditingKey(record.id);\n  };\n\n  const cancel = () => {\n    setEditingKey('');\n  };\n\n  const save = async (id) => {\n    try {\n      const row = await form.validateFields();\n      const newData = [...data];\n      const index = newData.findIndex((item) => id === item.id);\n\n      if (index > -1) {\n        const item = newData[index];\n        newData.splice(index, 1, { ...item, ...row });\n        setData(newData);\n        setEditingKey('');\n      } else {\n        newData.push(row);\n        setData(newData);\n        setEditingKey('');\n      }\n    } catch (errInfo) {\n      console.log('Validate Failed:', errInfo);\n    }\n    // updateEmployee(id);\n  };\n  \n  \n  const columns = [\n    {\n      title: 'first_name',\n      dataIndex: 'first_name',\n      // key: 'first_name',\n      editable: true,\n      sorter: {\n        compare: (a, b) => a.first_name.localeCompare(b.first_name),\n        multiple: 1,\n      },\n      ...getColumnSearchProps('first_name'),\n    },\n    {\n      title: 'last_name',\n      dataIndex: 'last_name',\n      // key: 'last_name',\n      editable: true,\n      sorter: {\n        compare: (a, b) => a.last_name.localeCompare(b.last_name),\n        multiple: 2,\n      },\n      ...getColumnSearchProps('last_name'),\n    },\n    {\n      title: 'email',\n      dataIndex: 'email',\n      // key: 'email',\n      editable: true,\n      ...getColumnSearchProps('email'),\n    },\n    {\n      title: 'gender',\n      dataIndex: 'gender',\n      // key: 'gender',\n      editable: true,\n      ...getColumnSearchProps('gender'),\n    },\n    // {\n    //   title: 'Age',\n    //   dataIndex: 'age',\n    //   key: 'age',\n    //   ...getColumnSearchProps('age'),\n    // },\n    {\n      title: 'country',\n      dataIndex: 'country',\n      // key: 'country',\n      editable: true,\n      ...getColumnSearchProps('country'),\n    },\n    {\n      title: 'update',\n      dataIndex: 'update',\n      render: (_, record) => {\n        const editable = isEditing(record);\n        return editable ? (\n          <span>\n            <a\n              href=\"javascript:;\"\n              onClick={() => save(record.id)}\n              // onClick={() => {updateEmployee(record.first_name)}}\n              style={{\n                marginRight: 8,\n              }}\n            >\n              Save\n            </a>\n            <Popconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\n              <a>Cancel</a>\n            </Popconfirm>\n          </span>\n        ) : (\n          <Typography.Link disabled={editingKey !== ''} onClick={() => edit(record)}>\n            Edit\n          </Typography.Link>\n        );\n      },\n    },\n    {\n      title: 'action',\n      dataIndex: '',\n      key: 'x',\n      render: (text, record) => (\n        <a onClick={() => {deleteEmployee(record.first_name)}}><span style={{color:\"red\"}}>Delete</span></a>\n      ),\n    },\n  ];\n\n  const mergedColumns = columns.map((col) => {\n    if (!col.editable) {\n      return col;\n    }\n\n    return {\n      ...col,\n      onCell: (record) => ({\n        record,\n        inputType: col.dataIndex === 'age' ? 'number' : 'text',\n        dataIndex: col.dataIndex,\n        title: col.title,\n        editing: isEditing(record),\n      }),\n    };\n  });\n\n\n\n  return (\n    <>\n    <div style={{display: \"flex\", flexDirection: \"row\"}}>\n      <div style={{width: \"60%\", marginLeft: \"auto\", marginRight: \"auto\"}}>\n      <Form form={form} component={false}>\n      <Table \n      className=\"effect8\"\n      components={{\n        body: {\n          cell: EditableCell,\n        },\n      }}\n      dataSource={data} \n      columns={mergedColumns} \n      // searchableProps={{fuzzySearch:true}} \n      // exportable \n      pagination={{\n        onChange: cancel,\n      }}\n      scroll={{y:400}}\n      bordered\n      rowClassName=\"editable-row\"\n      rowClassName={(record, index) => index%2 === 0 ? 'table-row-light' : 'table-row-dark'}\n      />\n      </Form>\n      </div>\n      <div>\n        <AddNew />\n      </div>\n      <div>\n        <Link to=\"/chart\">\n        <button style={{backgroundColor: \"orangered\", marginRight: 20}} type=\"submit\"><span style={{color: \"white\"}}>Go to Charts</span></button>\n        </Link>\n      </div>\n    </div>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}